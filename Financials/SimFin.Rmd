---
title: "simfin"
author: "Eugene Zhou"
date: "3/31/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
getwd()
```


```{r}
library(simfinapi)
library(simfinR)
library(tidyverse)
```

```{r}
simfin_api <- "jRip1bOy0XLlxdAmke28qOWlQJ8wgoE7"
```


```{r}
sfa_set_api_key(api_key = "jRip1bOy0XLlxdAmke28qOWlQJ8wgoE7")
sfa_set_cache_dir("/Users/eugenezhou/R_Working_Directory/tidymodeling/Financials")
```

```{r}
companies <- simfinR_get_available_companies("jRip1bOy0XLlxdAmke28qOWlQJ8wgoE7")
```

```{r}
biopharma <- companies %>%
  filter(grepl("Pharm", name) | grepl("Bio", name))
```

```{r}
simfinR_get_available_statements(378249, simfin_api)
zbh <- simfinR_get_fin_statements(378249, simfin_api, years = 2021)
```


```{r}
# download stock price data
tickers <- c("AMZN", "GOOG") # Amazon, Google
prices <- sfa_get_prices(tickers)
```

```{r}
# create plot
ggplot(prices) +
  aes(x = date, y = close, color = ticker) +
  geom_line()
```

```{r}
company_info <- sfa_get_info(tickers)
```

```{r}
AMZN_CF <- sfa_get_statement(
  ticker = "AMZN",
  simfin_id = 62747,
  "cf",
  period = "fy",
  fyear = c(2021, 2020)
)
```

